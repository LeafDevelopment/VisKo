<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Visualize</title>
        <script src="./Visualize/SpryAssets/SpryAccordion.js" type="text/javascript"></script>
        <link href="./Visualize/SpryAssets/SpryAccordion.css" rel="stylesheet" type="text/css" />  
  </head>
    <body>
        <div><center><b>Option 1: Submit Visualization Query</b>
                <form id="form1" name="form1" method="post" action="">
                    <label for="queryText"></label>
                    <textarea name="queryText" id="queryText" cols="95" rows="7" onkeyup="checkTextArea()"></textarea>
                    <p>Syntax is <b id='syntaxStatus'>incorrect.</b> </p> 
            
		 <input type="submit" class="btn btn-primary"  name="submitQuery" id="submitQuery" value="Submit" style="float: right;"/>
                </form></center><br />		
                       <br />
	<hr>
            <center>
                <b>Option 2: Interact with Generation Wizard</b>
            </center>
            <br />
            <br />
            <div id="Accordion1" class="Accordion" tabindex="0">
                <div class="AccordionPanel">
                    <center><div class="AccordionPanelTab">1D Abstractions</div></center>
                    <div class="AccordionPanelContent">
                        <div onclick="setAbstraction(this.id);" class="absch" id="http://openvisko.org/rdf/ontology/visko-view.owl#1D_Timeline">
                            <p>1. Timeline</p>
                            <p><img src="Images/something.jpg" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                    </div>
                </div>
                <div class="AccordionPanel">
                    <center><div class="AccordionPanelTab">2D Abstractions</div></center>
                    <div class="AccordionPanelContent">
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_ContourMap">
                            <p>1. Contour Map</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_ForceGraph">
                            <p>2. Force Graph</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_PointMap">
                            <p>3. Point Map</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_RasterMap">
                            <p>4. Raster Map</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_SpeciesDistribution_Map">
                            <p>5. Species Distribution Map</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_SpherizedRaster">
                            <p>6. Spherized Raster</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_TimeSeriesPlot">
                            <p>7. Time Series Plot</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_VisKo_DataTransformations_ForceGraph">
                            <p>8. VisKo Data Transformations Force Graph</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_VisKo_Instances_BarChart">
                            <p>9. VisKo Instances Bar Chart</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#2D_VisKo_OperatorPaths_ForceGraph">
                            <p>10. VisKo Operator Paths Force Graph</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                    </div>
                </div>
                <div class="AccordionPanel">
                    <center><div class="AccordionPanelTab">3D Abstractions</div></center>
                    <div class="AccordionPanelContent">
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_BarChart">
                            <p>1. Bar Chart</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_IsoSurfacesRendering">
                            <p>2. Iso Sufaces Rendering</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_MeshPlot">
                            <p>3. Mesh Plot</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_MolecularStructure">
                            <p>4. Molecular Structure</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_MolecularStructure_Cartoon">
                            <p>5. Molecular Structure Cartoon</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_MolecularStructure_Ribbon">
                            <p>6. Molecular Structure Ribbon</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_PointPlot">
                            <p>7. Point Plot</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_RasterCube">
                            <p>8. Raster Cube</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_SurfacePlot">
                            <p>9. Surface Plot</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                        
                        <div onclick="setAbstraction(this.id);" class="abstraction" id="http://openvisko.org/rdf/ontology/visko-view.owl#3D_VolumeRendering">
                            <p>10. Volume Rendering</p>
                            <p><img src="" alt="" name="abstraction" width="200" height="110" id="abstraction" style="background-color: #3333FF" /></p>
                            <p>&nbsp;</p>
                        </div>
                        <br />
                    </div>
                </div>
		        <script>

                        var correctSyntax = false; 
					
                        function showSyntaxStatus(){ 
                            if(correctSyntax === false){
                                document.getElementById('syntaxStatus').innerHTML = 'incorrect.';
                            }
                            else{
                                document.getElementById('syntaxStatus').innerHTML = 'correct.';
                            }
                        }
                        function checkTextArea(){
                            var queryText = document.getElementById("queryText").value; //get input text 
						
                            if(!isEmpty(queryText)){
                                var queryArray = queryText.split(" ");
                                var queryArrayLength = queryArray.length;
							
                                //keeps track of keywords that can only be encountered once
                                var visualize = false; 
                                var as = false; 
                                var where = false;
                                var format = false;
							
                                for(var i = 0; i<queryArrayLength; i++){
							
                                    switch(queryArray[i]){
                                        case 'PREFIX':
                                            if(!visualize){ //Visualization not encountered yet so check for prefixes
                                                checkPrefix(queryArray.slice(i, queryArrayLength));
                                                i = i + 2 //move to the next block
                                            }
                                            else{
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            break;
                                        case 'VISUALIZE':
                                            if(!visualize){ //No visualization item has been found
                                                checkVisualize(queryArray.slice(i, queryArrayLength));
                                                visualize = true;
                                                i++; //move to the next block
                                            }
                                            else{ //There was already a visualize item found
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            break;
                                        case 'AS':
                                            if(visualize == true){ //Visualization found already
                                                checkAs(queryArray.slice(i, queryArrayLength));
                                                as = true;
                                                i = i + 3;
                                            }
                                            else{ //Visualization not found yet
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            break;
                                        case 'WHERE':
                                            if(as == false){ //WHERE is out of order
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            where = true;
                                            break;
                                        case 'FORMAT':
                                            if(!where){ //Out of order
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            else{ //Format is in order
                                                checkFormat(queryArray.slice(i, queryArrayLength));
                                                format = true;
                                                i = i + 2;
                                            }
                                            break;
                                        case 'AND':
                                            if(!format){ //Out of order
                                                correctSyntax = false;
                                                i = i + length; //exit loop
                                            }
                                            else{ //Format is in order
                                                checkAnd(queryArray.slice(i, queryArrayLength));
                                                i = i + 3;
                                            }
                                            break;
                                        default:
                                            checkEnd(i, queryArrayLength, queryArray[i]); //Checks to see if the last element is a space or more input
                                    }
								
                                }
                            }
                            showSyntaxStatus(); //Update syntax text
						
                        }
					
                        function checkPrefix(queryArray){
                            correctSyntax = false; //reset each time
                            if(queryArray[0]==="PREFIX" && !isEmpty(queryArray[1]) && !isEmpty(queryArray[2])){
                                if(!queryArray[1] === ' ' && !queryArray[2] === ' '){ //Check the second and third parameters are not a space
                                    correctSyntax = true;
                                }
                            }
                        }
					
                        function checkVisualize(queryArray){
                            correctSyntax = false; //reset each time
                            if(queryArray[0]==="VISUALIZE" && !isEmpty(queryArray[1])){
                                if(!queryArray[1] === ' '){ //Check the second parameter is not a space
                                    correctSyntax = true;
                                }
                            }
                        }
					
                        function checkAs(queryArray){
                            correctSyntax = false; //reset each time
                            if(queryArray[0]==="AS" && !isEmpty(queryArray[1]) && queryArray[2]==="IN" && !isEmpty(queryArray[3])){
                                if(!queryArray[1] === ' ' && !queryArray[3] === ' '){ //Check the second and third parameters are not a space
                                    correctSyntax = true;
                                }
                            }
                        }
					
                        function checkFormat(queryArray){
                            correctSyntax = false; //reset each time
                            if(queryArray[0]==="FORMAT" && queryArray[1]==="=" && !isEmpty(queryArray[2])){
                                if(!queryArray[2] === ' '){ //Check the second and third parameters are not a space
                                    correctSyntax = true;
                                }
                            }
                        }
					
                        function checkAnd(queryArray){
                            correctSyntax = false; //reset each time
                            if(queryArray[0]==="AND" && !isEmpty(queryArray[1]) && queryArray[2]==="=" && !isEmpty(queryArray[3])){
                                if(!queryArray[1] === ' ' && !queryArray[3] === ' '){ //Check the second and third parameters are not a space
                                    correctSyntax = true;
                                }
                            }
                        }
					
                        function checkEnd(index, length, item){ 
                            correctSyntax = false; //reset each time
                            if(index + 1 === length){ //End of the array
                                if(item === ' ' || item === '\n' || isEmpty(item)){
                                    correctSyntax = true;
                                }
                            }
                        }
	
                        function isEmpty(str) {
                            return (!str || 0 === str.length);
                        }
                    </script>	
                <script type="text/javascript">
                    var Accordion1 = new Spry.Widget.Accordion("Accordion1");
            
                </script>
                </body>
                </html>
