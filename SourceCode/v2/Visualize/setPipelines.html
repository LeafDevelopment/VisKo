<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script src="SpryAssets/SpryAccordion.js" type="text/javascript"></script>
<script type="text/javascript" src="/team2/sessionvars.js"></script>
<script type="text/javascript" src="/team2/setVariables.js"></script>
<script type="text/javascript" src="/team2/addVisualization.js"></script>

<link href="SpryAssets/SpryAccordion.css" rel="stylesheet" type="text/css" />
</head>
<style>
.one {
  width: 65%;
  float: left;
}

.two {
  margin-left: 70%;
}
</style>
<body>
<div class="one">
  <p>Select Pipeline<br />
 </p>
  <script>
  	
    document.write('<div id="Accordion1" class="Accordion" tabindex="0">' +
      '<div class="AccordionPanel">' +
    '<div class="AccordionPanelTab">Pipelines: &lt;&lt;GMT&gt;&gt;</div>' +
            
    '<div class="AccordionPanelContent">' +
        
   	'<table width="100%" height="100%" border="1" >' +
        '<tr>' +
          '<th scope="col">ID</th>' +
          '<th scope="col">Abstraction</th>' +
          '<th scope="col">Format</th>' +
          '<th scope="col">&nbsp;</th>' +
          '<th scope="col">&nbsp;</th>' +
        '</tr>');

        for(var i = 0; i < sessvars.count.count; i++)
        {
            if(sessvars.abstraction[i].viewerSet === "d3-viewer-set")
            {
                addToList(i)
            }
        }

    document.write('<tr>'+
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
        '</tr>' +
      '</table>' +
    '</div>' +
  '</div>' +
  '<div class="AccordionPanel">' +
    '<div class="AccordionPanelTab">Pipelines: &lt;&lt;VTK&gt;&gt;</div>' +
    '<div class="AccordionPanelContent">' +
    '<table width="100%" height="100%" border="1" >' +
        '<tr>' +
          '<th scope="col">ID</th>' +
          '<th scope="col">Abstraction</th>' +
          '<th scope="col">Format</th>' +
          '<th scope="col">&nbsp;</th>' +
          '<th scope="col">&nbsp;</th>' +
        '</tr>');
        
        for(var i = 0; i < sessvars.count.count; i++)
        {
            if(sessvars.abstraction[i].viewerSet === "web-browser")
            {
                addToList(i);
            }
        }
        
        document.write('<tr>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' + 
          '<td>&nbsp;</td>' + 
          '<td>&nbsp;</td>' + 
          '<td>&nbsp;</td>' +
        '</tr>' +
      '</table></div>'+
  '</div>' +
  '<div class="AccordionPanel">' +
    '<div class="AccordionPanelTab">Pipelines: &lt;&lt;ParaView&gt;&gt;</div>' +
    '<div class="AccordionPanelContent">' +
    '<table width="100%" height="100%" border="1" >' +
        '<tr>' +
          '<th scope="col">ID</th>' +
          '<th scope="col">Abstraction</th>' +
          '<th scope="col">Format</th>' +
          '<th scope="col">&nbsp;</th>' +
          '<th scope="col">&nbsp;</th>' +
        '</tr>');
        
        for(var i = 0; i < sessvars.count.count; i++)
        {
            if(sessvars.abstraction[i].viewerSet === "paraview")
            {
                addToList(i);
            }
        }
        
        document.write('<tr>'+
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
          '<td>&nbsp;</td>' +
        '</tr>' +
      '</table></div>' +
  '</div>' +
'</div>' +
'</div>' + 
'<div class="two">' +
'<br /><br /><br />' +
'Pipeline Execution Queue <br /><br />' +
'<table width="100%" height="100%" border="1" >' +
        '<tr>' +
          '<th scope="col">ID</th>' +
          '<th scope="col">Result</th>' +
          '<th scope="col">&nbsp;</th>' +
        '</tr>'+
        '<tr id = "queue">'+
          '<td id ="queuechild">&nbsp;</td>' +
          '<center><td id ="queuechildimage">&nbsp;</td></center>' +
          '<td>&nbsp;</td>' +
        '</tr>' +
      '</table>' +
'</div>');
</script>
<script type="text/javascript">
var Accordion1 = new Spry.Widget.Accordion("Accordion1");
</script>

<script>

function runQuery(index)
{
       var abstraction = sessvars.abstraction[index - 1].name;
       var viewerSet = sessvars.abstraction[index - 1].viewerSet;
       var inputDataFormat = sessvars.abstraction[index - 1].inputDataFormat;
       var inputDataType = sessvars.abstraction[index - 1].inputDataType;
       var url = sessvars.abstraction[index - 1].inputDataURL;
       

    $.ajax({
        type:"POST",
        url: "../team2/sendQuery.php",
        data:  {
            abstraction: sessvars.abstraction[index - 1].name,
            viewerSet: sessvars.abstraction[index - 1].viewerSet,
            inputDataFormat: sessvars.abstraction[index - 1].inputDataFormat,
            inputDatatype: sessvars.abstraction[index - 1].inputDataType,
            url: sessvars.abstraction[index - 1].inputDataURL
        },
        success: function(){
        //do stuff after the AJAX calls successfully completes
        	
    	}

    });

}
</script> 


</body>
</html>